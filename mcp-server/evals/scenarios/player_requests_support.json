{
  "id": "player_requests_support",
  "description": "Player kicks off an adventure and asks the MCP to introduce a supporting NPC before progressing the quest.",
  "preconditions": {
    "apiBaseUrl": "http://localhost:4000",
    "assumptions": [
      "The API service boots with seeded campaign data.",
      "Player identifier `ember-heart` is available on the roster."
    ]
  },
  "steps": [
    {
      "label": "Player: Let's begin our adventure.",
      "tool": "session.startAdventure",
      "arguments": {
        "playerId": "ember-heart"
      },
      "capture": {
        "activeQuestId": "startingQuest.id"
      },
      "expect": {
        "status": "success",
        "assert": [
          { "path": "startingQuest.status", "equals": "active" },
          { "path": "player.id", "equals": "ember-heart" }
        ]
      }
    },
    {
      "label": "Player: I want to recruit Captain Auria Vale for backup.",
      "tool": "world.createNpc",
      "arguments": {
        "name": "Captain Auria Vale",
        "archetype": "Skyship Captain",
        "motivation": "Keep trade winds safe from raiders",
        "relationshipToParty": "potential ally",
        "voiceNote": "Confident tone with sea-salted humor"
      },
      "capture": {
        "allyName": "npc.name"
      },
      "expect": {
        "status": "success",
        "assert": [
          { "path": "npc.name", "equals": "Captain Auria Vale" },
          { "path": "npc.relationshipToParty", "equals": "potential ally" }
        ]
      }
    },
    {
      "label": "Player: Coordinate with Captain Auria Vale to secure safe passage.",
      "tool": "session.progressAdventure",
      "arguments": {
        "playerId": "ember-heart",
        "action": "coordinate with Captain Auria Vale to secure safe passage"
      },
      "expect": {
        "status": "success",
        "assert": [
          { "path": "quest.status", "equals": "completed" },
          { "path": "resolutionNote", "contains": "Captain Auria Vale" },
          { "path": "supportingNpcs", "minLength": 1 }
        ]
      }
    }
  ]
}
