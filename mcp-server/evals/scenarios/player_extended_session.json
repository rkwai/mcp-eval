{
  "id": "player_extended_session",
  "description": "Player completes three sequential actions, verifying the MCP keeps the campaign flowing across multiple turns.",
  "preconditions": {
    "apiBaseUrl": "http://localhost:4000",
    "assumptions": [
      "The API service boots with seeded campaign data.",
      "Player identifier `ember-heart` is available on the roster."
    ]
  },
  "steps": [
    {
      "label": "Player: Launch the expedition.",
      "tool": "session.startAdventure",
      "arguments": {
        "playerId": "ember-heart"
      },
      "capture": {
        "initialQuestId": "startingQuest.id"
      },
      "expect": {
        "status": "success",
        "assert": [
          { "path": "startingQuest.status", "equals": "active" },
          { "path": "player.id", "equals": "ember-heart" }
        ]
      }
    },
    {
      "label": "Player action: Scout the ember tunnels for threats.",
      "tool": "session.progressAdventure",
      "arguments": {
        "playerId": "ember-heart",
        "action": "scout the ember tunnels for threats"
      },
      "capture": {
        "firstCompletedQuestId": "quest.id"
      },
      "expect": {
        "status": "success",
        "assert": [
          { "path": "quest.status", "equals": "completed" },
          { "path": "resolutionNote", "contains": "ember tunnels" },
          { "path": "nextQuestBoard.completed", "minLength": 1 }
        ]
      }
    },
    {
      "label": "Player action: Negotiate passage with the gearwrights.",
      "tool": "session.progressAdventure",
      "arguments": {
        "playerId": "ember-heart",
        "action": "negotiate passage with the gearwrights"
      },
      "capture": {
        "secondCompletedQuestId": "quest.id"
      },
      "expect": {
        "status": "success",
        "assert": [
          { "path": "quest.status", "equals": "completed" },
          { "path": "nextQuestBoard.completed", "minLength": 2 }
        ]
      }
    },
    {
      "label": "Player action: Rally the citizens for the final push.",
      "tool": "session.progressAdventure",
      "arguments": {
        "playerId": "ember-heart",
        "action": "rally the citizens for the final push"
      },
      "capture": {
        "thirdCompletedQuestId": "quest.id"
      },
      "expect": {
        "status": "success",
        "assert": [
          { "path": "quest.status", "equals": "completed" },
          { "path": "nextQuestBoard.completed", "minLength": 3 },
          { "path": "supportingNpcs", "minLength": 1 }
        ]
      }
    },
    {
      "label": "Player: Review character sheet.",
      "tool": "party.inspect",
      "arguments": {
        "playerId": "ember-heart"
      },
      "expect": {
        "status": "success",
        "assert": [
          { "path": "completedQuestIds", "minLength": 3 },
          { "path": "currentQuest", "isNull": true }
        ]
      }
    }
  ]
}
